= 技术细节 =
开始的时候不能工作是因为使用了AspectJ作为AOP的实现，AspectJ需要在编译的字节码里面添加特殊的代码。
还有一个小问题：
   使用AspectJ之后，@Override不能正常编译，现在的ServiceImpl代码中删除了所有的@Override的Annotation。估计和AsjectJ的版本有关系，使用的AspectJ版本为1.5.3。
   此问题是由于ＪＤＫ的版本导致的，ＪＤＫ１.５对于@Override方法不能用在接口上。

= 使用方式 =
桌面上有一个部署的快捷方式，此快捷方式调用 ant运行 E:\Dcsh\ANT_AUTO下的脚本build.xml自动部署。所作的工作如下：
  # 下载代码
  # 使用AspectJ编译器编译
  # Copy编译好的文件到JBoss目录下
  # Touch项目部署目录下的web.xml，使JBoss自动从部署项目。


= 自动部署脚本=

'
<?xml version="1.0" encoding="UTF-8"?>
<project name="Server" default="redeploy" basedir=".">
	<typedef resource="org/tigris/subversion/svnant/svnantlib.xml" />
	
	<!--支持AOP的程序 -->
	<property name="build.compiler" value="org.aspectj.tools.ant.taskdefs.Ajc11CompilerAdapter" />

 	<property name="ajc" value="org.aspectj.tools.ant.taskdefs.Ajc11CompilerAdapter"/>

	<description>
		重新在Jboss中部署Server程序，实现的方法是touch应用程序中的
		根中的web.xml
    </description>
	<!-- 设置属性，需要根据自己的路径进行修改  -->
	<property name="src" location="Server/src" />
	<property name="build" location="Server/build/classes" />
	<property name="web" location="Server/WebContent" />
	<property name="jboss"
		location="D:/OpenTools/jboss-5.0.0.GA/server/default/deploy/Server.war" />


	<target name="copy" depends="compile">
		<copy todir="${jboss}/WEB-INF/classes">
			<fileset dir="${build}" >
				<include name="**/*.xml" />
				<include name="**/*.class" />
			</fileset>
			<fileset dir="${src}">
				<include name="**/*.xml"/>
			</fileset>
		</copy>

		<copy todir="${jboss}">
			<fileset dir="${web}">				
				<include name="**/*.xml" />
				<include name="**/*.jsp" />
				<include name="**/*.css" />
				<include name="**/*.js" />
				<include name="**/*.jar" />
			</fileset>
		</copy>

	</target>

	<target name="redeploy" depends="copy">
		<touch file="${jboss}/WEB-INF/web.xml" />
	</target>

	<target name="compile" depends="checkout">
  <!--depends="checkout"  com/dcsh/market/service/	-->	
		<javac srcdir="${src}" excludes="com/dcsh/market/service/*Impl.java" destdir="${build}" source="1.5">
    <compilerarg line="-XnotReweavable"/>
    			<classpath>
				<path location="${build}"/>
				<fileset dir="Server/WebContent/WEB-INF/lib">
					<include name="*.jar" />
				</fileset>
				<fileset dir="D:/Project/大成/Code/devlib">
					<include name="*.jar" />
				</fileset>
				
			</classpath>
		</javac>
			
	<javac srcdir="${src}" includes="com/dcsh/market/service/*Impl.java" destdir="${build}" source="1.5">
			<classpath>
				<path location="${build}"/>
				<fileset dir="Server/WebContent/WEB-INF/lib">
					<include name="*.jar" />
				</fileset>
				<fileset dir="D:/Project/大成/Code/devlib">
					<include name="*.jar" />
				</fileset>
				
			</classpath>
  </javac>




	</target>

	<target name="checkout">
		<svn>
			<checkout url="http://ccdcsales.googlecode.com/svn/trunk/" destPath="."/>
		</svn>
	</target>
		

</project>

'